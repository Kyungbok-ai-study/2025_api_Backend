# PDF íŒŒì¼ ì—…ë¡œë“œ ë° íŒŒì‹± ê¸°ëŠ¥ - ëª¨ë“  í•™ê³¼ ì§€ì›

## ê°œìš”

ê²½ë³µëŒ€í•™êµ ë¬¼ë¦¬ì¹˜ë£Œí•™ê³¼, ì‘ì—…ì¹˜ë£Œí•™ê³¼, ê°„í˜¸í•™ê³¼ êµìˆ˜ë“¤ì´ PDF, Excel íŒŒì¼ì„ ì—…ë¡œë“œí•˜ë©´ ìë™ìœ¼ë¡œ íŒŒì‹±í•˜ì—¬ ë¬¸ì œ ì€í–‰ì— ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.

## ì§€ì› ê¸°ëŠ¥

### ğŸ¯ ì§€ì› í•™ê³¼
- **ë¬¼ë¦¬ì¹˜ë£Œí•™ê³¼**: ê·¼ê³¨ê²©ê³„, ì‹ ê²½ê³„, ì‹¬íê³„, ì†Œì•„ë°œë‹¬, ìŠ¤í¬ì¸ ì˜í•™
- **ì‘ì—…ì¹˜ë£Œí•™ê³¼**: ì¸ì§€ì¬í™œ, ê°ê°í†µí•©, ë³´ì¡°ê¸°êµ¬, ì •ì‹ ê±´ê°•, ì•„ë™ë°œë‹¬  
- **ê°„í˜¸í•™ê³¼**: ê¸°ë³¸ê°„í˜¸, ì„±ì¸ê°„í˜¸, ì•„ë™ê°„í˜¸, ëª¨ì„±ê°„í˜¸, ì •ì‹ ê°„í˜¸, ì§€ì—­ì‚¬íšŒê°„í˜¸

### ğŸ“„ ì§€ì› íŒŒì¼ í˜•ì‹
- PDF (`.pdf`) - Gemini 2.0 Flashë¡œ ì´ë¯¸ì§€ ë¶„ì„
- Excel (`.xlsx`, `.xls`) - êµ¬ì¡°í™”ëœ ë°ì´í„° íŒŒì‹±
- í…ìŠ¤íŠ¸ (`.txt`) - ì¼ë°˜ í…ìŠ¤íŠ¸ íŒŒì‹±
- Word (`.docx`) - ë¬¸ì„œ íŒŒì‹±

### ğŸ¤– AI ë¶„ì„ ê¸°ëŠ¥
- **ìë™ ë‚œì´ë„ ë¶„ì„**: AIê°€ ë¬¸ì œ ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬ 'í•˜', 'ì¤‘', 'ìƒ' ë‚œì´ë„ ìë™ ë°°ì •
- **í•™ê³¼ë³„ ì˜ì—­ ë¶„ë¥˜**: ê° í•™ê³¼ì˜ ì „ë¬¸ ì˜ì—­ì— ë§ê²Œ ìë™ ë¶„ë¥˜
- **ë¬¸ì œ ìœ í˜• ì¸ì‹**: ê°ê´€ì‹, ë‹¨ë‹µí˜•, ì„œìˆ í˜• ë“± ìë™ ê°ì§€
- **ì‹¤ì‹œê°„ ì§„í–‰ë¥  í‘œì‹œ**: íŒŒì‹± ê³¼ì •ì˜ ëª¨ë“  ë‹¨ê³„ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§

## API ì—”ë“œí¬ì¸íŠ¸

### 1. íŒŒì¼ ì—…ë¡œë“œ
```http
POST /api/professor/upload-questions
Content-Type: multipart/form-data

Form Data:
- file: [íŒŒì¼]
- content_type: "auto" | "questions" | "answers"
- file_title: "íŒŒì¼ ì œëª©"
- file_category: "questions"
```

**ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "success": true,
  "message": "ì‘ì—…ì¹˜ë£Œí•™ê³¼ ë¬¸ì œ 22ê°œ íŒŒì‹± ì™„ë£Œ",
  "department": "ì‘ì—…ì¹˜ë£Œí•™ê³¼",
  "total_questions": 22,
  "questions": [
    {
      "id": 1,
      "question_number": 1,
      "content": "ì¸ì§€ì¬í™œì¹˜ë£Œì—ì„œ ì£¼ì˜ì§‘ì¤‘ í–¥ìƒì„ ìœ„í•œ...",
      "difficulty": "ì¤‘",
      "area_name": "ì¸ì§€ì¬í™œ"
    }
  ],
  "json_path": "/data/save_parser/20241201_120000_1_ì‘ì—…ì¹˜ë£Œí•™ê³¼_íŒŒì¼.json",
  "supported_areas": ["ì¸ì§€ì¬í™œ", "ê°ê°í†µí•©", "ë³´ì¡°ê¸°êµ¬", "ì •ì‹ ê±´ê°•", "ì•„ë™ë°œë‹¬"]
}
```

### 2. ì‹¤ì‹œê°„ ì§„í–‰ë¥  ì¡°íšŒ
```http
GET /api/professor/upload-progress/{file_name}
```

**ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "message": "ğŸ¤– ë¬¸ì œ 15 AI ë¶„ì„ ì¤‘... (15/22)",
  "progress": 85.5,
  "timestamp": "2024-12-01T12:30:45",
  "user_id": 1,
  "file_name": "exam_questions.pdf",
  "completed": false
}
```

### 3. ìŠ¹ì¸ ëŒ€ê¸° ë¬¸ì œ ì¡°íšŒ
```http
GET /api/professor/pending-questions?department_filter=ì‘ì—…ì¹˜ë£Œí•™ê³¼
```

### 4. í•™ê³¼ë³„ í†µê³„
```http
GET /api/professor/department-statistics
```

**ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "department_statistics": {
    "ë¬¼ë¦¬ì¹˜ë£Œí•™ê³¼": {
      "total_questions": 66,
      "pending": 22,
      "approved": 44,
      "rejected": 0,
      "difficulty_distribution": {"í•˜": 5, "ì¤‘": 12, "ìƒ": 5},
      "areas": ["ê·¼ê³¨ê²©ê³„", "ì‹ ê²½ê³„", "ì‹¬íê³„"],
      "latest_upload": "2024-12-01T12:00:00"
    },
    "ì‘ì—…ì¹˜ë£Œí•™ê³¼": {
      "total_questions": 44,
      "pending": 22,
      "approved": 22,
      "rejected": 0,
      "difficulty_distribution": {"í•˜": 4, "ì¤‘": 14, "ìƒ": 4},
      "areas": ["ì¸ì§€ì¬í™œ", "ê°ê°í†µí•©", "ë³´ì¡°ê¸°êµ¬"],
      "latest_upload": "2024-12-01T11:30:00"
    }
  },
  "supported_departments": ["ë¬¼ë¦¬ì¹˜ë£Œí•™ê³¼", "ì‘ì—…ì¹˜ë£Œí•™ê³¼", "ê°„í˜¸í•™ê³¼"],
  "total_departments": 2,
  "overall_total": 110
}
```

## ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ë¬¼ë¦¬ì¹˜ë£Œí•™ê³¼ êµìˆ˜ PDF ì—…ë¡œë“œ

1. **íŒŒì¼ ì—…ë¡œë“œ**: ë¬¼ë¦¬ì¹˜ë£Œí•™ê³¼ êµìˆ˜ê°€ ì‹œí—˜ ë¬¸ì œ PDF ì—…ë¡œë“œ
   ```
   ğŸ“„ íŒŒì¼ ë¶„ì„ ì¤‘... (2.3 MB)
   ğŸ¯ í•™ê³¼ ê°ì§€ ì™„ë£Œ: ë¬¼ë¦¬ì¹˜ë£Œí•™ê³¼
   ğŸ“– PDF â†’ ì´ë¯¸ì§€ ë³€í™˜ ì¤‘...
   ğŸ“„ 5ê°œ í˜ì´ì§€ ì´ë¯¸ì§€ ìƒì„± ì™„ë£Œ
   ğŸ“– í˜ì´ì§€ 1/5 ì´ë¯¸ì§€ ë¶„ì„ ì¤‘...
   ğŸ“– í˜ì´ì§€ 2/5 ì´ë¯¸ì§€ ë¶„ì„ ì¤‘...
   ...
   ğŸ¤– AI ë¬¸ì œ ë¶„ì„ ì‹œì‘: 22ê°œ ë¬¸ì œ
   ğŸ¤– ë¬¸ì œ 1 AI ë¶„ì„ ì¤‘... (1/22)
   ğŸ¤– ë¬¸ì œ 2 AI ë¶„ì„ ì¤‘... (2/22)
   ...
   âœ… íŒŒì‹± ì™„ë£Œ!
   ```

2. **AI ë¶„ì„ ê²°ê³¼**: ìë™ìœ¼ë¡œ ë¬¼ë¦¬ì¹˜ë£Œí•™ê³¼ ì „ë¬¸ ì˜ì—­ ë¶„ë¥˜
   - ë¬¸ì œ 1-5: ê·¼ê³¨ê²©ê³„ (ë‚œì´ë„: ì¤‘)
   - ë¬¸ì œ 6-10: ì‹ ê²½ê³„ (ë‚œì´ë„: ìƒ)
   - ë¬¸ì œ 11-15: ì‹¬íê³„ (ë‚œì´ë„: í•˜)
   - ë¬¸ì œ 16-20: ì†Œì•„ë°œë‹¬ (ë‚œì´ë„: ì¤‘)
   - ë¬¸ì œ 21-22: ìŠ¤í¬ì¸ ì˜í•™ (ë‚œì´ë„: ìƒ)

3. **ë¬¸ì œ ê²€í† **: êµìˆ˜ê°€ íŒŒì‹±ëœ ë¬¸ì œë“¤ì„ ê²€í† í•˜ê³  í•„ìš”ì‹œ ìˆ˜ì •
4. **ì¼ê´„ ìŠ¹ì¸**: ê²€í†  ì™„ë£Œ í›„ ëª¨ë“  ë¬¸ì œ ì¼ê´„ ìŠ¹ì¸

### ì‹œë‚˜ë¦¬ì˜¤ 2: ì‘ì—…ì¹˜ë£Œí•™ê³¼ êµìˆ˜ Excel ì—…ë¡œë“œ

1. **Excel íŒŒì¼ ì²˜ë¦¬**: êµ¬ì¡°í™”ëœ ë°ì´í„°ë¡œ ë¹ ë¥¸ íŒŒì‹±
   ```
   ğŸ“Š Excel íŒŒì¼ ë¡œë“œ ì¤‘... (ì‘ì—…ì¹˜ë£Œí•™ê³¼)
   ğŸ¯ ë¬¸ì œ ìœ í˜• ìë™ ë°°ì • ì¤‘... (ì‹ ì¥í›ˆ)
   ğŸ“Š ì‹œíŠ¸ ë¶„ì„ ì¤‘: 3ê°œ ì‹œíŠ¸
   ğŸ“„ ì‹œíŠ¸ '2024ë…„ë„ ë¬¸ì œ' ì²˜ë¦¬ ì¤‘... (1/3)
   ğŸ¤– AI ë¬¸ì œ ë¶„ì„ ì‹œì‘: 22ê°œ ë¬¸ì œ (ì‘ì—…ì¹˜ë£Œí•™ê³¼)
   âœ… íŒŒì‹± ì™„ë£Œ!
   ```

2. **í•™ê³¼ë³„ ì „ë¬¸ ë¶„ì„**: ì‘ì—…ì¹˜ë£Œ ì „ë¬¸ ì˜ì—­ìœ¼ë¡œ ìë™ ë¶„ë¥˜
   - ì¸ì§€ì¬í™œ: 8ë¬¸ì œ
   - ê°ê°í†µí•©: 6ë¬¸ì œ  
   - ë³´ì¡°ê¸°êµ¬: 4ë¬¸ì œ
   - ì •ì‹ ê±´ê°•: 2ë¬¸ì œ
   - ì•„ë™ë°œë‹¬: 2ë¬¸ì œ

## ì£¼ìš” íŠ¹ì§•

### ğŸ¯ ìë™ í•™ê³¼ ê°ì§€
- íŒŒì¼ëª…, ì‚¬ìš©ì ì •ë³´, ë‚´ìš© í‚¤ì›Œë“œë¡œ í•™ê³¼ ìë™ ê°ì§€
- ë¬¼ì¹˜, ì‘ì¹˜, ê°„í˜¸ ë“± ì•½ì–´ë„ ì¸ì‹

### ğŸ“Š ì‹¤ì‹œê°„ ì§„í–‰ë¥ 
- PDF ì´ë¯¸ì§€ ë³€í™˜ ì§„í–‰ë¥ 
- í˜ì´ì§€ë³„ ë¶„ì„ ì§„í–‰ë¥   
- AI ë¶„ì„ ë¬¸ì œë³„ ì§„í–‰ë¥ 
- ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ì§„í–‰ë¥ 

### ğŸ¤– AI ê¸°ë°˜ ë¶„ì„
- **ë”¥ì‹œí¬ AI**: ë¬¸ì œ ë‚´ìš© ê¸°ë°˜ ë‚œì´ë„ ë¶„ì„
- **Gemini 2.0 Flash**: PDF ì´ë¯¸ì§€ OCR ë° êµ¬ì¡° ë¶„ì„
- **í‰ê°€ìœ„ì› ë°ì´í„°**: ê¸°ì¡´ ì¶œì œ íŒ¨í„´ í•™ìŠµ

### ğŸ’¾ ë°ì´í„° ì§€ì†ì„±
- JSON íŒŒì¼ë¡œ íŒŒì‹± ê²°ê³¼ ë°±ì—…
- ë°ì´í„°ë² ì´ìŠ¤ì— ë©”íƒ€ë°ì´í„° ì €ì¥
- ì„œë²„ ì¬ì‹œì‘ í›„ì—ë„ ëª¨ë“  ë°ì´í„° ìœ ì§€

## í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ ì˜ˆì‹œ

```javascript
// íŒŒì¼ ì—…ë¡œë“œ
const uploadFile = async (file, department) => {
  const formData = new FormData();
  formData.append('file', file);
  formData.append('content_type', 'auto');
  formData.append('file_title', file.name);
  
  const response = await fetch('/api/professor/upload-questions', {
    method: 'POST',
    body: formData
  });
  
  const result = await response.json();
  
  if (result.success) {
    // ì§„í–‰ë¥  ëª¨ë‹ˆí„°ë§ ì‹œì‘
    monitorProgress(file.name);
  }
};

// ì§„í–‰ë¥  ëª¨ë‹ˆí„°ë§
const monitorProgress = (fileName) => {
  const interval = setInterval(async () => {
    const response = await fetch(`/api/professor/upload-progress/${fileName}`);
    const progress = await response.json();
    
    updateProgressBar(progress.progress, progress.message);
    
    if (progress.completed) {
      clearInterval(interval);
      loadPendingQuestions(); // ê²€í†  í˜ì´ì§€ë¡œ ì´ë™
    }
  }, 1000); // 1ì´ˆë§ˆë‹¤ í™•ì¸
};
```

## ì˜¤ë¥˜ ì²˜ë¦¬

### ì¼ë°˜ì ì¸ ì˜¤ë¥˜
- **íŒŒì¼ í¬ê¸° ì´ˆê³¼**: 50MB ì œí•œ
- **ì§€ì›ë˜ì§€ ì•ŠëŠ” í˜•ì‹**: PDF, Excel, í…ìŠ¤íŠ¸ë§Œ ì§€ì›
- **íŒŒì‹± ì‹¤íŒ¨**: Gemini API ì˜¤ë¥˜ ì‹œ ê¸°ë³¸ê°’ ì‚¬ìš©
- **AI ë¶„ì„ ì‹¤íŒ¨**: ìœ„ì¹˜ ê¸°ë°˜ ë‚œì´ë„ ì˜ˆì¸¡ í´ë°±

### ë¡œê·¸ ì˜ˆì‹œ
```
âš ï¸ ë¬¸ì œ 15: AI ë¶„ì„ ì‹¤íŒ¨, ìœ„ì¹˜ ê¸°ë°˜ ì˜ˆì¸¡ ì‚¬ìš© (ë‚œì´ë„: ì¤‘)
âŒ í˜ì´ì§€ 3 íŒŒì‹± ì‹¤íŒ¨: Invalid JSON response
âœ… ë¬¸ì œ ê²€í†  í˜ì´ì§€ ì¤€ë¹„ ì™„ë£Œ: 20ê°œ ë¬¸ì œ
``` 